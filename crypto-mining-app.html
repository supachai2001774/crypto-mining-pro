<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚õèÔ∏è Crypto Mining Pro - All-in-One</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background:
                radial-gradient(900px 600px at -10% -10%, rgba(6, 182, 212, 0.10), transparent 60%),
                radial-gradient(900px 600px at 110% 10%, rgba(167, 139, 250, 0.10), transparent 60%),
                linear-gradient(135deg, #0f172a, #1e293b);
            min-height: 100vh;
            padding: 20px;
            padding-bottom: calc(88px + env(safe-area-inset-bottom, 0px));
            color: #e5e7eb;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-align: center;
        }

        .header p {
            text-align: center;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .header-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .user-info {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
        }

        .logout-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        }

        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(239, 68, 68, 0.6);
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .tab-btn {
            padding: 15px 30px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #10b981;
            box-shadow: 0 5px 20px rgba(16, 185, 129, 0.4);
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dashboard Cards */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card .icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .stat-card .label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
        }

        .stat-card .sub-value {
            font-size: 0.9em;
            margin-top: 5px;
            color: #4ade80;
        }

        /* Mining Control */
        .mining-control {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
        }

        .mining-btn {
            padding: 20px 60px;
            font-size: 1.5em;
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            background: linear-gradient(135deg, #10b981, #059669);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .mining-btn:hover {
            transform: scale(1.05);
        }

        .mining-btn.active {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); }
            50% { box-shadow: 0 8px 35px rgba(239, 68, 68, 0.6); }
        }

        /* Shop Grid */
        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        /* Force 2 cards per row on small screens */
        @media (max-width: 540px) {
            #shop .shop-grid { grid-template-columns: repeat(2, minmax(0,1fr)); gap: 12px; }
            #shop .miner-card { padding: 18px; }
            .dashboard { grid-template-columns: repeat(2, minmax(0,1fr)); gap: 12px; }
            .stat-card { padding: 18px; }
        }

        .miner-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .miner-card:hover {
            transform: translateY(-5px);
            border: 2px solid #10b981;
        }
        .miner-thumb{ position:relative; width:100%; aspect-ratio: 16/9; border-radius:12px; overflow:hidden; background: linear-gradient(135deg,#0ea5e9,#22d3ee); display:grid; place-items:center; }
        .miner-thumb svg{ width:72%; height:auto; opacity:.9; }
        .badge{ position:absolute; top:10px; left:10px; background: rgba(2,6,23,.7); border:1px solid rgba(148,163,184,.35); color:#e2e8f0; padding:4px 8px; border-radius:999px; font-size:.78rem; font-weight:800; }
        .miner-meta{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:12px; }
        .miner-meta .left{ color:#cbd5e1; font-weight:800; }
        .miner-meta .left small{ display:block; opacity:.8; font-weight:600; }
        .price-line{ text-align:right; }
        .price-line .price{ font-weight:900; color:#4ade80; font-size:1.1rem; }
        .owned{ margin-top:6px; opacity:.75; font-size:.9rem; text-align:center; }

        .buy-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .buy-btn:hover:not(:disabled) {
            transform: scale(1.05);
        }

        .buy-btn:disabled {
            background: rgba(148,163,184,0.25);
            color: #cbd5e1;
            opacity: 1;
            cursor: not-allowed;
        }

        /* Lucky Wheel */
        .wheel-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            margin-bottom: 30px;
        }

        .wheel {
            width: 400px;
            height: 400px;
            border-radius: 50%;
            border: 10px solid #fbbf24;
            position: relative;
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            background: conic-gradient(
                from 0deg,
                #ef4444 0deg 45deg,
                #f59e0b 45deg 90deg,
                #10b981 90deg 135deg,
                #3b82f6 135deg 180deg,
                #8b5cf6 180deg 225deg,
                #ec4899 225deg 270deg,
                #14b8a6 270deg 315deg,
                #f97316 315deg 360deg
            );
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .wheel-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
        }

        .spin-btn {
            padding: 20px 50px;
            font-size: 1.3em;
            font-weight: bold;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(251, 191, 36, 0.4);
            transition: all 0.3s ease;
        }

        .spin-btn:hover:not(:disabled) {
            transform: scale(1.1);
        }

        .spin-btn:disabled {
            background: gray;
            cursor: not-allowed;
            opacity: 0.5;
        }

        /* Transactions */
        .transaction-list {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
        }

        .transaction-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Referral */
        .referral-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
        }

        .referral-code {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            letter-spacing: 3px;
        }

        .copy-btn {
            padding: 15px 40px;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            transform: scale(1.05);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            display: none;
            animation: slideIn 0.3s ease;
            z-index: 1000;
        }

        @keyframes slideIn {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Pro theme overrides (clean, sharp, modern) */
        .header{
            background: rgba(2,6,23,0.6);
            border: 1px solid rgba(148,163,184,0.18);
            box-shadow: 0 12px 32px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.04);
        }
        .tab-btn{
            border-radius: 12px;
            background: rgba(15,23,42,0.6);
            border: 1px solid rgba(148,163,184,0.2);
            backdrop-filter: blur(6px);
            color: #e5e7eb;
        }
        .tab-btn:hover{ transform: translateY(-2px); background: rgba(15,23,42,0.75); }
        .tab-btn.active{
            background: linear-gradient(135deg, #10b981, #06b6d4);
            border-color: transparent;
            color: #06101a;
            box-shadow: 0 10px 26px rgba(6,182,212,0.35);
        }
        .stat-card, .mining-control, .referral-box, .transaction-list, .miner-card{
            background: rgba(2,6,23,0.6);
            border: 1px solid rgba(148,163,184,0.18);
            box-shadow: 0 10px 26px rgba(0,0,0,0.32), inset 0 1px 0 rgba(255,255,255,0.04);
        }
        .buy-btn{
            background: linear-gradient(135deg, #10b981, #06b6d4);
            color: #06101a;
            box-shadow: 0 8px 24px rgba(6,182,212,0.35);
            border-radius: 12px;
        }
        .buy-btn:hover:not(:disabled){ transform: translateY(-1px) scale(1.02); box-shadow: 0 12px 32px rgba(6,182,212,0.45); }
        .copy-btn{
            background: linear-gradient(135deg, #60a5fa, #22d3ee);
            color: #06101a;
            box-shadow: 0 8px 24px rgba(34,211,238,0.35);
            border-radius: 12px;
        }
        .copy-btn:hover{ transform: translateY(-1px) scale(1.02); box-shadow: 0 12px 30px rgba(34,211,238,0.45); }
        .notification{
            background: linear-gradient(135deg, #10b981, #06b6d4);
            color: #06101a;
            box-shadow: 0 6px 22px rgba(6,182,212,0.35);
        }

        /* Frame 2 mode */
        .frame-2 .summary{ display:none !important; }
        .frame-2 .container{ max-width: 430px; margin: 0 auto; }
        .frame-2 .shop-grid{ grid-template-columns: repeat(2, minmax(0,1fr)); gap: 14px; }
        .frame-2 .miner-card{ padding: 18px; border-radius: 18px; }
        @media (max-width: 480px){ .frame-2 .container{ padding-left: 12px; padding-right: 12px; } }

        /* Account panel for settings */
        .account-panel{display:flex;align-items:center;justify-content:space-between;gap:12px;background:rgba(2,6,23,0.6);border:1px solid rgba(148,163,184,0.18);border-radius:14px;padding:12px 14px;margin-bottom:14px;box-shadow:0 8px 22px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.04);}
        .account-panel .acc-left{display:flex;align-items:center;gap:10px;}
        .account-panel .acc-avatar{width:36px;height:36px;border-radius:999px;display:grid;place-items:center;background:linear-gradient(135deg,#a78bfa,#22d3ee);color:#06101a;font-weight:900;}
        .account-panel .acc-name{font-weight:900;}
        .account-panel .acc-role{font-size:.85rem;color:#94a3b8;}
        .account-panel .acc-right .logout-btn{margin:0;}
        
        /* Top Summary */
        .summary{ margin: 0 0 18px; }
        .summary-grid{ display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:12px; }
        @media (max-width: 480px){ .summary-grid{ grid-template-columns: 1fr; } }
        .summary-card{
            display:flex; align-items:center; gap:12px; padding:14px 16px; border-radius:14px;
            background: rgba(2,6,23,0.6); border:1px solid rgba(148,163,184,0.18);
            box-shadow: 0 8px 22px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.04);
        }
        .summary-card .s-icon{ font-size:22px; width:38px; height:38px; display:grid; place-items:center; border-radius:10px;
            background: linear-gradient(135deg, #10b981, #06b6d4); color:#06101a; box-shadow: 0 6px 18px rgba(6,182,212,0.28);
        }
        .summary-card .s-info{ display:flex; flex-direction:column; }
        .summary-card .s-label{ font-size:.86rem; color:#94a3b8; font-weight:700; }
        .summary-card .s-value{ font-size:1.4rem; font-weight:900; letter-spacing:.2px; color:#e5e7eb; }

        /* Top Summary (hero balance) */
        .hero-card{
            position: relative; border-radius: 18px; padding: 18px; background: rgba(17,24,39,0.85);
            border:1px solid rgba(148,163,184,0.18); box-shadow: 0 12px 30px rgba(0,0,0,0.32);
        }
        .hero-cap{ position:absolute; top:-16px; left:0; right:0; height:32px; background: linear-gradient(135deg,#f59e0b,#f97316); border-top-left-radius:18px; border-top-right-radius:18px; filter: drop-shadow(0 8px 16px rgba(249,115,22,0.25)); }
        .hero-title{ text-align:center; color:#cbd5e1; font-weight:800; letter-spacing:.3px; margin-top:8px; }
        .hero-balance{ text-align:center; font-size:2rem; font-weight:900; letter-spacing:.3px; margin-top:4px; }
        .hero-balance .currency{ font-size:1.1rem; font-weight:800; color:#94a3b8; margin-left:6px; }
        .hero-change{ text-align:center; margin-top:6px; font-weight:800; }
        .hero-change .pos{ color:#34d399; }
        .hero-change .neg{ color:#f87171; }
        .rate-strip{
            margin-top: 14px; display:flex; align-items:center; justify-content:space-between; gap:10px;
            background: rgba(2,6,23,0.6); border:1px solid rgba(148,163,184,0.18); padding:12px 14px; border-radius:12px;
        }
        .rate-left{ display:flex; align-items:center; gap:10px; color:#e2e8f0; font-weight:800; }
        .rate-ic{ width:32px; height:32px; display:grid; place-items:center; border-radius:8px; background: linear-gradient(135deg,#10b981,#06b6d4); color:#06101a; }
        .rate-val{ font-weight:900; color:#e5e7eb; }

        /* Bottom Navigation */
        .bottom-nav{
            position: fixed; left:0; right:0; bottom:0; z-index: 100;
            background: rgba(2,6,23,0.75);
            border-top: 1px solid rgba(148,163,184,0.22);
            backdrop-filter: blur(10px);
            padding: 10px 12px calc(12px + env(safe-area-inset-bottom, 0px));
        }
        .bottom-grid{ display:grid; grid-template-columns: repeat(5, 1fr); gap:8px; max-width: 900px; margin: 0 auto; }
        .bottom-item{
            display:flex; flex-direction:column; align-items:center; justify-content:center; gap:4px;
            color:#94a3b8; border:1px solid rgba(148,163,184,0.18); background: rgba(15,23,42,0.6);
            padding:10px 6px; border-radius:12px; cursor:pointer; transition: .18s ease; min-height:56px;
        }
        .bottom-item .icon{ font-size:18px; }
        .bottom-item .label{ font-size:.80rem; font-weight:700; letter-spacing:.1px; }
        .bottom-item:hover{ transform: translateY(-1px); border-color: rgba(6,182,212,0.45); }
        .bottom-item.active{
            background: linear-gradient(135deg, #10b981, #06b6d4);
            color:#06101a; border-color: transparent; box-shadow: 0 10px 22px rgba(6,182,212,0.28);
        }

        /* Settings form polish */
        #settings h2, #settings h3{ position: relative; }
        #settings h3::after{ content:""; display:block; width:72px; height:3px; margin-top:8px; border-radius:2px; background: linear-gradient(90deg, #10b981, #06b6d4); opacity:.8; }
        #settings label{ display:block; margin-bottom:6px; font-weight:700; opacity:.9; }
        #settings .referral-box input,
        #settings .referral-box select{
            background: rgba(15,23,42,0.75) !important;
            color: #e5e7eb !important;
            border: 1px solid rgba(148,163,184,0.25) !important;
            border-radius: 12px !important;
            padding: 12px 14px !important;
            outline: none !important;
            transition: box-shadow .18s ease, transform .1s ease, border-color .18s ease;
        }
        #settings .referral-box input:focus,
        #settings .referral-box select:focus{
            box-shadow: 0 0 0 6px rgba(6,182,212,0.18) !important;
            border-color: rgba(6,182,212,0.6) !important;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 { font-size: 1.8em; }
            .nav-tabs { flex-direction: column; }
            .tab-btn { width: 100%; }
            .wheel { width: 300px; height: 300px; }
            .header-controls { flex-direction: column; }
            .logout-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        
        
        <section class="summary" aria-label="‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏ö‡∏ô">
            <div class="hero-card">
                <div class="hero-cap" aria-hidden="true"></div>
                <div class="hero-title">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏ß‡∏°</div>
                <div class="hero-balance">‡∏ø<span id="heroBalance">0.00</span><span class="currency">THB</span></div>
                <div class="hero-change" id="heroChange"><span id="heroChangeValue" class="pos">+0.00</span> (<span id="heroChangePercent">0.00%</span>)</div>
                <div class="rate-strip">
                    <div class="rate-left"><div class="rate-ic">‚ö°</div> ‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏∏‡∏î</div>
                    <div class="rate-val">‡∏ø<span id="heroRate">0.00</span>/‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
                </div>
            </div>
        </section>

        <!-- Tab 1: Mining -->
        <div id="mining" class="tab-content active">
            <div class="dashboard">
                                <div class="stat-card">
                    <div class="icon">‚ö°</div>
                    <div class="label">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏∏‡∏î</div>
                    <div class="value">‡∏ø<span id="miningRate">0.10</span></div>
                    <div class="sub-value">/‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
                </div>
                                <div class="stat-card">
                    <div class="icon">üî•</div>
                    <div class="label">‡∏û‡∏•‡∏±‡∏á‡∏Ç‡∏∏‡∏î‡∏£‡∏ß‡∏°</div>
                    <div class="value"><span id="totalPower">1.0</span></div>
                    <div class="sub-value">MH/s</div>
                </div>
            </div>

            <div class="mining-control">
                <h2 style="margin-bottom: 20px;">‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏∏‡∏î</h2>
                <button class="mining-btn" id="miningBtn" onclick="toggleMining()">
                    üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡∏∏‡∏î‡πÄ‡∏•‡∏¢!
                </button>
                <p style="margin-top: 20px; opacity: 0.8;" id="miningStatus">
                    ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡∏∏‡∏î! ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°
                </p>
            </div>
        </div>

        <!-- Tab 2: Shop -->
        <div id="shop" class="tab-content">
            <h2 style="margin-bottom: 20px;">üõí‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏∏‡∏î</h2>
            <p style="opacity: 0.8; margin-bottom: 20px;">‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ!</p>
            
            <div class="shop-grid" id="shopGrid">
                <!-- ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
            </div>
        </div>

        <!-- Tab 3: Lucky Wheel -->
        <div id="wheel" class="tab-content">
            <div class="wheel-container">
                <h2>üé∞ ‡∏ß‡∏á‡∏•‡πâ‡∏≠‡∏ô‡∏≥‡πÇ‡∏ä‡∏Ñ</h2>
                <p style="opacity: 0.8;">‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏∏‡πâ‡∏ô‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•!</p>
                
                <div class="wheel" id="luckyWheel">
                    <div class="wheel-center">üéØ</div>
                </div>

                <p style="font-size: 1.2em;">
                    ‡πÄ‡∏´‡∏•‡∏∑‡∏≠: <span id="spinsLeft" style="color: #fbbf24; font-weight: bold;">3</span> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                </p>

                <button class="spin-btn" onclick="spinWheel()" id="spinBtn">
                    üé≤ ‡∏´‡∏°‡∏∏‡∏ô‡∏ß‡∏á‡∏•‡πâ‡∏≠
                </button>
            </div>
        </div>

        <!-- Tab 4: Wallet -->
        <div id="wallet" class="tab-content">
            <h2 style="margin-bottom: 20px;">üí∞ ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏á‡∏¥‡∏ô</h2>
            
            <div class="dashboard" style="margin-bottom: 30px;">
                <div class="stat-card">
                    <div class="icon">üíµ</div>
                    <div class="label">‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>
                    <div class="value">‡∏ø<span id="walletBalance">0.00</span></div>
                </div>
                <div class="stat-card">
                    <div class="icon">üìä</div>
                    <div class="label">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                    <div class="value"><span id="transactionCount">0</span></div>
                    <div class="sub-value">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                <button class="buy-btn" style="font-size: 1.2em; padding: 20px;" onclick="showNotification('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô - ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤')">
                    üí≥ ‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô
                </button>
                <button class="buy-btn" style="font-size: 1.2em; padding: 20px;" onclick="showNotification('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô - ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤')">
                    üè¶ ‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
                </button>
            </div>

            <h3 style="margin-bottom: 15px;">üìú ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h3>
            <div class="transaction-list" id="transactionList">
                <p style="text-align: center; opacity: 0.6;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
            </div>
        </div>

        <!-- Tab 5: Referral -->
        <div id="referral" class="tab-content">
            <div class="referral-box">
                <h2 style="text-align: center; margin-bottom: 20px;">üë• ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h2>
                <p style="text-align: center; opacity: 0.8; margin-bottom: 30px;">
                    ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏°‡∏≤‡∏™‡∏°‡∏±‡∏Ñ‡∏£ ‡∏£‡∏±‡∏ö ‡∏ø50 ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ! ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡πá‡πÑ‡∏î‡πâ ‡∏ø100
                </p>

                <h3>‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</h3>
                <div class="referral-code" id="referralCode">LOADING...</div>
                
                <div style="text-align: center;">
                    <button class="copy-btn" onclick="copyReferralCode()">
                        üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™
                    </button>
                </div>

                <div class="dashboard" style="margin-top: 30px;">
                    <div class="stat-card">
                        <div class="icon">üë•</div>
                        <div class="label">‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</div>
                        <div class="value"><span id="referralCount">0</span></div>
                        <div class="sub-value">‡∏Ñ‡∏ô</div>
                    </div>
                    <div class="stat-card">
                        <div class="icon">üí∞</div>
                        <div class="label">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</div>
                        <div class="value">‡∏ø<span id="referralEarnings">0.00</span></div>
                        <div class="sub-value">THB</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 6: Settings -->
        <div id="settings" class="tab-content">
            <h2 style="margin-bottom: 20px;">‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h2>

            <div class="account-panel">
                <div class="acc-left">
                    <div class="acc-avatar">üë§</div>
                    <div>
                        <div class="acc-name" id="settingsUsername">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>
                        <div class="acc-role">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</div>
                    </div>
                </div>
                <div class="acc-right">
                    <button class="logout-btn" onclick="logout()">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
                </div>
            </div>

            <div class="referral-box" style="margin-bottom:20px;">
                <h3>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</h3>
                <p style="opacity:.85; margin:6px 0 16px;">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‡∏≠‡∏µ‡πÄ‡∏°‡∏• ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</p>
                <div style="display:grid; gap:14px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));">
                    <div>
                        <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
                        <input id="set_username" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                    </div>
                    <div>
                        <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                        <input id="set_email" type="email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                    </div>
                    <div>
                        <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</label>
                        <input id="set_password" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                    </div>
                    <div>
                        <label>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
                        <input id="set_password2" type="password" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢ÔøΩÔøΩ‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                    </div>
                </div>
                <button class="buy-btn" style="margin-top:16px; max-width:260px;" onclick="saveAccountSettings()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</button>
            </div>

            <div class="referral-box">
                <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</h3>
                <p style="opacity:.85; margin:6px 0 16px;">‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>
                <div style="display:grid; gap:14px; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));">
                    <div>
                        <label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                        <input id="info_fullname" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                    </div>
                    <div>
                        <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</label>
                        <input id="info_email" type="email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                    </div>
                    <div>
                        <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                        <input id="info_phone" type="tel" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                    </div>
                    <div>
                        <label>‡πÄ‡∏û‡∏®</label>
                        <select id="info_gender" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                            <option value="">‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏</option>
                            <option value="male">‡∏ä‡∏≤‡∏¢</option>
                            <option value="female">‡∏´‡∏ç‡∏¥‡∏á</option>
                            <option value="other">‡∏≠‡∏∑ÔøΩÔøΩÔøΩ‡∏ô‡πÜ</option>
                        </select>
                    </div>
                    <div>
                        <label>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</label>
                        <input id="info_birth" type="date" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                    </div>
                    <div>
                        <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label>
                        <input id="info_address" type="text" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                    </div>
                    <div>
                        <label>‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå</label>
                        <input id="info_zip" type="text" placeholder="‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå" style="width:100%; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,.3); background:rgba(255,255,255,.1); color:#fff;">
                    </div>
                </div>
                <button class="copy-btn" style="margin-top:16px; max-width:260px;" onclick="savePersonalInfo()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</button>
            </div>
        </div>
    </div>

    <nav class="bottom-nav" role="navigation" aria-label="Main">
        <div class="bottom-grid">
            <button class="bottom-item active" data-tab="mining" onclick="switchTab('mining')">
                <div class="icon">‚õèÔ∏è</div>
                <div class="label">‡∏Ç‡∏∏‡∏î‡πÄ‡∏á‡∏¥‡∏ô</div>
            </button>
            <button class="bottom-item" data-tab="shop" onclick="switchTab('shop')">
                <div class="icon">üõí</div>
                <div class="label">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</div>
            </button>
            <button class="bottom-item" data-tab="wheel" onclick="switchTab('wheel')">
                <div class="icon">üé∞</div>
                <div class="label">‡∏ß‡∏á‡∏•‡πâ‡∏≠</div>
            </button>
            <button class="bottom-item" data-tab="wallet" onclick="switchTab('wallet')">
                <div class="icon">üí∞</div>
                <div class="label">‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</div>
            </button>
            <button class="bottom-item" data-tab="settings" onclick="switchTab('settings')">
                <div class="icon">‚öôÔ∏è</div>
                <div class="label">‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</div>
            </button>
        </div>
    </nav>

    <div class="notification" id="notification"></div>

    <script>
        // ============ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡∏° ============
        let gameData = {
            balance: 0,
            miningRate: 0.10,
            todayEarnings: 0,
            totalPower: 1.0,
            isMining: false,
            miners: [],
            spinsRemaining: 3,
            referralCode: '',
            referrals: [],
            referralEarnings: 0,
            transactions: [],
            account: {
                username: '',
                email: ''
            },
            personalInfo: {
                fullname: '',
                email: '',
                phone: '',
                gender: '',
                birth: '',
                address: '',
                zip: ''
            }
        };

        // ============ Miners Data ============
        const minerTypes = [
            { id: 'starter', name: '‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà', icon: '‚õèÔ∏è', power: 1.0, rate: 0.10, price: 0 },
            { id: 'rtx3060', name: 'RTX 3060', icon: 'üñ•Ô∏è', power: 5.0, rate: 0.50, price: 500 },
            { id: 'rtx3080', name: 'RTX 3080', icon: 'üíª', power: 15.0, rate: 1.50, price: 2000 },
            { id: 'rtx4090', name: 'RTX 4090', icon: 'üéÆ', power: 30.0, rate: 3.00, price: 5000 },
            { id: 'asics19', name: 'ASIC S19', icon: '‚öôÔ∏è', power: 100.0, rate: 10.00, price: 20000 },
            { id: 'farm', name: 'Mining Farm', icon: 'üè≠', power: 500.0, rate: 50.00, price: 100000 }
        ];

        // ============ Lucky Wheel Prizes ============
        const wheelPrizes = [10, 20, 50, 100, 200, 500, 1000, 0];

        // ============ Tab System ============
        function switchTab(tabName) {
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å tab
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // ‡πÅ‡∏™‡∏î‡∏á tab ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            const targetTab = document.getElementById(tabName);
            if (targetTab) targetTab.classList.add('active');

            // ‡∏ï‡∏±‡πâ‡∏á active ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° Navigation ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö tab
            const matchBtn = Array.from(document.querySelectorAll('.tab-btn')).find(b => {
                const on = b.getAttribute('onclick') || '';
                return on.includes(`switchTab('${tabName}')`);
            });
            if (matchBtn) matchBtn.classList.add('active');

            // ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏∏‡πà‡∏° Bottom Navigation
            document.querySelectorAll('.bottom-item').forEach(i => i.classList.remove('active'));
            const matchBottom = Array.from(document.querySelectorAll('.bottom-item')).find(i => i.dataset.tab === tabName);
            if (matchBottom) matchBottom.classList.add('active');

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            if (tabName === 'wallet') {
                updateWallet();
            }
            if (tabName === 'settings') {
                loadSettingsToForm();
            }
            if (tabName === 'shop') {
                renderShop();
            }
        }

        // ============ Mining System ============
        let miningInterval = null;

        function toggleMining() {
            gameData.isMining = !gameData.isMining;
            const btn = document.getElementById('miningBtn');
            const status = document.getElementById('miningStatus');

            if (gameData.isMining) {
                btn.textContent = '‚è∏Ô∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏Ç‡∏∏‡∏î';
                btn.classList.add('active');
                status.textContent = 'üî• ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ç‡∏∏‡∏î... ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤!';
                startMining();
                showNotification('‚úÖ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡∏∏‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
            } else {
                btn.textContent = 'üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡∏∏‡∏î‡πÄ‡∏•‡∏¢!';
                btn.classList.remove('active');
                status.textContent = '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡∏∏‡∏î! ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°';
                stopMining();
                showNotification('‚è∏Ô∏è ‡∏´‡∏¢‡∏∏‡∏î‡∏Ç‡∏∏‡∏î‡πÅ‡∏•‡πâ‡∏ß');
            }
        }

        function startMining() {
            miningInterval = setInterval(() => {
                gameData.balance += gameData.miningRate;
                gameData.todayEarnings += gameData.miningRate;
                updateDisplay();
                
                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                if (Math.random() < 0.1) saveData();
            }, 1000);
        }

        function stopMining() {
            if (miningInterval) {
                clearInterval(miningInterval);
                miningInterval = null;
            }
        }

        // ============ Display Update ============
        function updateDisplay() {
            const balEl = document.getElementById('totalBalance'); if (balEl) balEl.textContent = gameData.balance.toFixed(2);
            const tb = document.getElementById('topTotalBalance'); if (tb) tb.textContent = gameData.balance.toFixed(2);
            const hb = document.getElementById('heroBalance'); if (hb) hb.textContent = gameData.balance.toFixed(2);
            document.getElementById('miningRate').textContent = gameData.miningRate.toFixed(2);
            const hr = document.getElementById('heroRate'); if (hr) hr.textContent = gameData.miningRate.toFixed(2);
            const teEl = document.getElementById('todayEarnings'); if (teEl) teEl.textContent = gameData.todayEarnings.toFixed(2);
            const te = document.getElementById('topTodayEarnings'); if (te) te.textContent = gameData.todayEarnings.toFixed(2);
            const hc = document.getElementById('heroChangeValue'); const hp = document.getElementById('heroChangePercent');
            if (hc && hp) {
                const val = gameData.todayEarnings;
                const percent = gameData.balance > 0 ? (val / gameData.balance) * 100 : 0;
                hc.textContent = `${val >= 0 ? '+' : ''}${val.toFixed(2)}`;
                hc.className = val >= 0 ? 'pos' : 'neg';
                hp.textContent = `${percent.toFixed(2)}%`;
            }
            document.getElementById('totalPower').textContent = gameData.totalPower.toFixed(1);
            document.getElementById('walletBalance').textContent = gameData.balance.toFixed(2);
            document.getElementById('spinsLeft').textContent = gameData.spinsRemaining;
            document.getElementById('referralCount').textContent = gameData.referrals.length;
            document.getElementById('referralEarnings').textContent = gameData.referralEarnings.toFixed(2);
            document.getElementById('transactionCount').textContent = gameData.transactions.length;
        }

        // ============ Shop System ============
        function renderShop() {
            const grid = document.getElementById('shopGrid');
            grid.innerHTML = '';

            minerTypes.forEach(miner => {
                const owned = gameData.miners.filter(m => m.id === miner.id).length;
                const canBuy = gameData.balance >= miner.price || miner.price === 0;

                const card = document.createElement('div');
                card.className = 'miner-card';
                const localImg = `assets/miners/${miner.id}.png`;
                const placeholder = `https://placehold.co/600x338/0f172a/94a3b8?text=${encodeURIComponent(miner.name)}`;
                const images = {
                    starter: `<svg viewBox='0 0 200 120' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='g1' x1='0' x2='1'><stop stop-color='#10b981'/><stop offset='1' stop-color='#06b6d4'/></linearGradient></defs><rect rx='12' ry='12' width='200' height='120' fill='url(#g1)' opacity='0.18'/><rect x='20' y='30' width='160' height='60' rx='8' ry='8' fill='#0ea5e9'/><rect x='36' y='46' width='40' height='28' rx='4' fill='#111827'/><rect x='84' y='46' width='40' height='28' rx='4' fill='#111827'/><rect x='132' y='46' width='24' height='28' rx='4' fill='#111827'/></svg>`,
                    gtx1050ti: `<svg viewBox='0 0 200 120' xmlns='http://www.w3.org/2000/svg'><rect width='200' height='120' rx='12' fill='#a78bfa' opacity='.18'/><g><rect x='24' y='30' width='152' height='60' rx='10' fill='#0f172a'/><rect x='36' y='42' width='40' height='36' rx='4' fill='#22d3ee'/><rect x='84' y='42' width='80' height='36' rx='6' fill='#111827'/></g></svg>`,
                    rtx3060: `<svg viewBox='0 0 200 120' xmlns='http://www.w3.org/2000/svg'><rect width='200' height='120' rx='12' fill='#0ea5e9' opacity='.18'/><g><rect x='26' y='34' width='148' height='52' rx='10' fill='#111827'/><circle cx='58' cy='60' r='18' fill='#22d3ee'/><circle cx='58' cy='60' r='10' fill='#0ea5e9'/><rect x='86' y='46' width='72' height='28' rx='6' fill='#1f2937'/></g></svg>`,
                    rtx4090: `<svg viewBox='0 0 200 120' xmlns='http://www.w3.org/2000/svg'><rect width='200' height='120' rx='12' fill='#f59e0b' opacity='.18'/><g><rect x='26' y='34' width='148' height='52' rx='10' fill='#0f172a'/><circle cx='58' cy='60' r='20' fill='#06b6d4'/><rect x='84' y='46' width='72' height='28' rx='6' fill='#1f2937'/></g></svg>`,
                    antminers9: `<svg viewBox='0 0 200 120' xmlns='http://www.w3.org/2000/svg'><rect width='200' height='120' rx='12' fill='#34d399' opacity='.18'/><g><rect x='30' y='28' width='140' height='64' rx='10' fill='#0f172a'/><rect x='48' y='42' width='24' height='36' rx='4' fill='#1f2937'/><rect x='80' y='42' width='24' height='36' rx='4' fill='#1f2937'/><rect x='112' y='42' width='24' height='36' rx='4' fill='#1f2937'/></g></svg>`,
                    profarm: `<svg viewBox='0 0 200 120' xmlns='http://www.w3.org/2000/svg'><rect width='200' height='120' rx='12' fill='#22d3ee' opacity='.18'/><g><rect x='20' y='40' width='160' height='40' rx='8' fill='#0f172a'/><rect x='28' y='48' width='24' height='24' rx='4' fill='#1f2937'/><rect x='60' y='48' width='24' height='24' rx='4' fill='#1f2937'/><rect x='92' y='48' width='24' height='24' rx='4' fill='#1f2937'/><rect x='124' y='48' width='24' height='24' rx='4' fill='#1f2937'/></g></svg>`,
                    gtx1050tiasx: `<svg viewBox='0 0 200 120' xmlns='http://www.w3.org/2000/svg'><rect width='200' height='120' rx='12' fill='#a78bfa' opacity='.18'/><g><rect x='24' y='30' width='152' height='60' rx='10' fill='#0f172a'/><rect x='36' y='42' width='40' height='36' rx='4' fill='#22d3ee'/><rect x='84' y='42' width='80' height='36' rx='6' fill='#111827'/></g></svg>`
                };
                /* svg removed - using emoji icon rendering */
                card.innerHTML = `
                    <div style="text-align: center; font-size: 3em; margin-bottom: 10px;">${miner.icon}</div>
                    <h3 style="text-align: center; margin-bottom: 10px; text-transform: uppercase;">${miner.name}</h3>
                    <p style="opacity: 0.8; text-align: center;">
                        ‚ö° ${miner.power} MH/s<br>
                        üí∞ ‡∏ø${miner.rate}/‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                    </p>
                    <p style="text-align: center; font-size: 1.8em; color: #22c55e; margin: 18px 0;">
                        ${miner.price === 0 ? '‡∏ü‡∏£‡∏µ!' : '‡∏ø' + miner.price.toLocaleString()}
                    </p>
                    ${owned > 0 ? `<p style="text-align: center; opacity: 0.85;">‡∏°‡∏µ‡πÅ‡∏•‡πâ‡∏ß: ${owned} ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</p>` : ''}
                    <button class="buy-btn" onclick="buyMiner('${miner.id}')" ${!canBuy || miner.price === 0 ? 'disabled' : ''}>
                        ${miner.price === 0 ? '‡∏°‡∏µ‡πÅ‡∏•‡πâ‡∏ß' : (canBuy ? '‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏•‡∏¢' : '‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠')}
                    </button>
                `;
                grid.appendChild(card);
            });
        }

        function buyMiner(id) {
            const miner = minerTypes.find(m => m.id === id);
            if (!miner || gameData.balance < miner.price) return;

            gameData.balance -= miner.price;
            gameData.totalPower += miner.power;
            gameData.miningRate += miner.rate;
            gameData.miners.push({ id: miner.id, name: miner.name });

            addTransaction('purchase', -miner.price, `‡∏ã‡∏∑‡πâ‡∏≠ ${miner.name}`);
            
            showNotification(`üéâ ‡∏ã‡∏∑‡πâ‡∏≠ ${miner.name} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!`);
            updateDisplay();
            renderShop();
            saveData();
        }

        // ============ Lucky Wheel ============
        function spinWheel() {
            if (gameData.spinsRemaining <= 0) {
                showNotification('‚ùå ‡∏´‡∏°‡∏∏‡∏ô‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ!');
                return;
            }

            const wheel = document.getElementById('luckyWheel');
            const btn = document.getElementById('spinBtn');
            btn.disabled = true;

            const randomPrize = wheelPrizes[Math.floor(Math.random() * wheelPrizes.length)];
            const rotation = 360 * 5 + (Math.random() * 360);

            wheel.style.transform = `rotate(${rotation}deg)`;

            setTimeout(() => {
                gameData.spinsRemaining--;
                
                if (randomPrize > 0) {
                    gameData.balance += randomPrize;
                    addTransaction('wheel', randomPrize, '‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏à‡∏≤‡∏Å‡∏ß‡∏á‡∏•‡πâ‡∏≠');
                    showNotification(`üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ ‡∏ø${randomPrize}!`);
                } else {
                    showNotification('üò¢ ‡πÄ‡∏™‡∏µ‡∏¢‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢ ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà!');
                }

                updateDisplay();
                saveData();
                btn.disabled = gameData.spinsRemaining <= 0;
            }, 5000);
        }

        // ============ Wallet & Transactions ============
        function addTransaction(type, amount, desc) {
            gameData.transactions.push({
                type,
                amount,
                desc,
                date: new Date().toLocaleString('th-TH')
            });
            updateWallet();
        }

        function updateWallet() {
            const list = document.getElementById('transactionList');
            
            if (gameData.transactions.length === 0) {
                list.innerHTML = '<p style="text-align: center; opacity: 0.6;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>';
                return;
            }

            list.innerHTML = gameData.transactions.slice(-10).reverse().map(t => `
                <div class="transaction-item">
                    <div>
                        <div style="font-weight: bold;">${t.desc}</div>
                        <div style="font-size: 0.9em; opacity: 0.7;">${t.date}</div>
                    </div>
                    <div style="font-size: 1.3em; font-weight: bold; color: ${t.amount >= 0 ? '#4ade80' : '#ef4444'};">
                        ${t.amount >= 0 ? '+' : ''}‡∏ø${Math.abs(t.amount).toFixed(2)}
                    </div>
                </div>
            `).join('');
        }

        // ============ Referral System ============
        function generateReferralCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 8; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        function copyReferralCode() {
            const code = document.getElementById('referralCode').textContent;
            navigator.clipboard.writeText(code);
            showNotification('üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
        }

        // ============ User Info ============
        function loadUserInfo() {
            const userSession = localStorage.getItem('userSession');
            if (userSession) {
                try {
                    const user = JSON.parse(userSession);
                    document.getElementById('username').textContent = user.username || user.email || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
                    // ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡πà‡∏≤ default ‡πÉ‡∏´‡πâ settings ‡∏à‡∏≤‡∏Å session ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡∏ß‡πà‡∏≤‡∏á
                    if(!gameData.account.username) gameData.account.username = user.username || '';
                    if(!gameData.account.email) gameData.account.email = user.email || '';
                    if(!gameData.personalInfo.email) gameData.personalInfo.email = user.email || '';
                } catch (e) {
                    document.getElementById('username').textContent = '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
                }
            } else {
                document.getElementById('username').textContent = '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
            }
        }

        // ============ Logout ============
        function logout() {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                saveData();
                localStorage.removeItem('userSession');
                localStorage.removeItem('token');
                showNotification('üëã ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
                setTimeout(() => {
                    window.location.href = 'login-register.html';
                }, 1000);
            }
        }

        // ============ Save/Load Data ============
        function saveData() {
            localStorage.setItem('cryptoMiningAllInOne', JSON.stringify(gameData));
        }

        function loadData() {
            const saved = localStorage.getItem('cryptoMiningAllInOne');
            if (saved) {
                const loaded = JSON.parse(saved);
                gameData = { ...gameData, ...loaded };
                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ fields ‡πÉ‡∏´‡∏°‡πà
                gameData.account = gameData.account || { username:'', email:'' };
                gameData.personalInfo = gameData.personalInfo || { fullname:'', email:'', phone:'', gender:'', birth:'', address:'', zip:'' };
            }

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ
            if (!gameData.referralCode) {
                gameData.referralCode = generateReferralCode();
            }

            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏∏‡∏î‡∏ü‡∏£‡∏µ
            if (gameData.miners.length === 0) {
                gameData.miners.push({ id: 'starter', name: '‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà' });
            }

            document.getElementById('referralCode').textContent = gameData.referralCode;
            updateDisplay();
            renderShop();
            updateWallet();
        }

        // ============ Notification ============
        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        // ============ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ============
        window.addEventListener('load', () => {
            loadUserInfo();
            loadData();
            // Activate Frame 2 from URL or localStorage
            const params = new URLSearchParams(window.location.search);
            const frame = params.get('frame') || localStorage.getItem('appFrame');
            if (frame === '2') {
                document.body.classList.add('frame-2');
                switchTab('shop');
            }
            setInterval(saveData, 10000); // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏∏‡∏Å 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        });

        // ===== Settings Handlers =====
        function loadSettingsToForm(){
            // ‡πÄ‡∏ï‡∏¥‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÅ‡∏ú‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ
            try{
                const sess = JSON.parse(localStorage.getItem('userSession')||'{}');
                const su = document.getElementById('settingsUsername');
                if(su){ su.textContent = (gameData.account.username || sess.username || sess.email || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô'); }
            }catch(e){}
            // Account & Security
            document.getElementById('set_username').value = gameData.account.username || '';
            document.getElementById('set_email').value = gameData.account.email || '';
            // Personal Info
            document.getElementById('info_fullname').value = gameData.personalInfo.fullname || '';
            document.getElementById('info_email').value = gameData.personalInfo.email || '';
            document.getElementById('info_phone').value = gameData.personalInfo.phone || '';
            document.getElementById('info_gender').value = gameData.personalInfo.gender || '';
            document.getElementById('info_birth').value = gameData.personalInfo.birth || '';
            document.getElementById('info_address').value = gameData.personalInfo.address || '';
            document.getElementById('info_zip').value = gameData.personalInfo.zip || '';
        }

        function saveAccountSettings(){
            const username = document.getElementById('set_username').value.trim();
            const email = document.getElementById('set_email').value.trim();
            const pw1 = document.getElementById('set_password').value;
            const pw2 = document.getElementById('set_password2').value;

            if(pw1 || pw2){
                if(pw1 !== pw2){
                    showNotification('‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô');
                    return;
                }
                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÉ‡∏ô users (‡πÄ‡∏î‡πÇ‡∏°)
                const users = JSON.parse(localStorage.getItem('users')||'[]');
                const idx = users.findIndex(u => u.email === email);
                if(idx !== -1){ users[idx].password = pw1; localStorage.setItem('users', JSON.stringify(users)); }
            }

            gameData.account.username = username;
            gameData.account.email = email;

            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï session ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ô‡∏´‡∏±‡∏ß
            const sess = JSON.parse(localStorage.getItem('userSession')||'{}');
            const newSess = { ...sess, username: username || sess.username, email: email || sess.email };
            localStorage.setItem('userSession', JSON.stringify(newSess));
            document.getElementById('username').textContent = newSess.username || newSess.email || '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';

            saveData();
            showNotification('‚úÖ ‡∏ö‡∏±ÔøΩÔøΩÔøΩ‡∏ó‡∏∂‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');

            // ‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å
            document.getElementById('set_password').value = '';
            document.getElementById('set_password2').value = '';
        }

        function savePersonalInfo(){
            gameData.personalInfo.fullname = document.getElementById('info_fullname').value.trim();
            gameData.personalInfo.email = document.getElementById('info_email').value.trim();
            gameData.personalInfo.phone = document.getElementById('info_phone').value.trim();
            gameData.personalInfo.gender = document.getElementById('info_gender').value;
            gameData.personalInfo.birth = document.getElementById('info_birth').value;
            gameData.personalInfo.address = document.getElementById('info_address').value.trim();
            gameData.personalInfo.zip = document.getElementById('info_zip').value.trim();
            saveData();
            showNotification('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        }

        console.log('‚õèÔ∏è Crypto Mining Pro - All-in-One Loaded! üöÄ');
    </script>
</body>
</html>